<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Welcome to Texas</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="grid-container">
        <header>
            <h1>
                <img src="images/logo.jpg" alt="Texas Logo" class="logo" />
                Welcome to Texas
            </h1>
            <nav>
                <ul>
                    <li><a href="index.html">Home</a></li>
                    <li><a href="capital.html">Austin</a></li>
                    <li><a href="irving.html">Irving</a></li>
                    <li><a href="fortworth.html">Fort Worth</a></li>
                    <li><a href="contact.html">Contact</a></li>
                </ul>
            </nav>
        </header>
        <aside>
            <h3>Did You Know?</h3>
             <!-- In capital.html -->
             <div class="weather-widget" data-city="Texas">
                <h4>Current Weather</h4>
                <div class="weather-content">
                <img class="weather-icon" src="" alt="Weather icon">
                <div class="weather-details">
                    <span class="weather-temp">--¬∞F</span>
                    <span class="weather-desc">Loading...</span>
                </div>
                </div>
            </div>
            <p>Nickname: Texas is known as "Lone Star State" because of its Lone Star Flag.</p>
            <p>History: Texas was an independent nation, the Republic of Texas, after winning independence from Mexico in 1836. It became the 28th state in 1845.</p>
            <ul>
                <li><strong>Capital:</strong> Austin</li>
                <li><strong>Largest City:</strong> Houston</li>
                <li><strong>Population:</strong> Over 29 million</li>
            </ul>
        </aside>
        <main>
            <section>
                <h2>Explore Texas Cities</h2>
                <section class="texas-map-section">
                    <div class="interactive-map">
                        <!-- SVG Texas Map with Paths -->
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 600" class="texas-map">
                            <!-- Texas Outline -->
                            <path class="state-outline" d="M150,100 L300,50 L500,80 L700,150 L650,400 L500,550 L300,500 L100,400 Z"/>
                            
                            <!-- City Markers -->
                            <g class="city-marker" data-city="austin">
                                <circle cx="400" cy="350" r="15" fill="#004080" stroke="#fff" stroke-width="2"/>
                                <text x="400" y="380" text-anchor="middle" fill="#004080" font-weight="bold">Austin</text>
                            </g>
                            
                            <g class="city-marker" data-city="irving">
                                <circle cx="350" cy="250" r="12" fill="#e63946" stroke="#fff" stroke-width="2"/>
                                <text x="350" y="280" text-anchor="middle" fill="#e63946" font-weight="bold">Irving</text>
                            </g>
                            
                            <g class="city-marker" data-city="fortworth">
                                <circle cx="300" cy="200" r="12" fill="#28a745" stroke="#fff" stroke-width="2"/>
                                <text x="300" y="230" text-anchor="middle" fill="#28a745" font-weight="bold">Fort Worth</text>
                            </g>
                        </svg>
                        
                        <!-- Map Legend -->
                        <div class="map-legend">
                            <h4>Featured Cities:</h4>
                            <ul>
                                <li><span class="legend-color" style="background:#004080"></span> Austin (Capital)</li>
                                <li><span class="legend-color" style="background:#e63946"></span> Irving</li>
                                <li><span class="legend-color" style="background:#28a745"></span> Fort Worth</li>
                            </ul>
                        </div>
                    </div>
                </section>
                <div class="city-cards">
                    <!-- Austin Card -->
                    <div class="city-card" data-city="austin">
                        <img src="images/austin-card.jpg" alt="Austin skyline" loading="lazy">
                        <div class="card-content">
                            <h3>Austin</h3>
                            <p>The live music capital with vibrant culture and tech innovation.</p>
                            <div class="card-stats">
                                <span>‚≠ê 4.8</span>
                                <span>üë™ 964K</span>
                            </div>
                            <a href="capital.html" class="card-button">Explore</a>
                        </div>
                    </div>
              
                    <!-- Irving Card -->
                    <div class="city-card" data-city="irving">
                        <img src="images/irving-card.jpg" alt="Irving skyline" loading="lazy">
                        <div class="card-content">
                            <h3>Irving</h3>
                            <p>Business hub with world-class attractions and diverse communities.</p>
                            <div class="card-stats">
                                <span>‚≠ê 4.6</span>
                                <span>üë™ 240K</span>
                            </div>
                            <a href="irving.html" class="card-button">Explore</a>
                        </div>
                    </div>
              
                    <!-- Fort Worth Card -->
                    <div class="city-card" data-city="fortworth">
                        <img src="images/fortworth-card.jpg" alt="Fort Worth stockyards" loading="lazy">
                        <div class="card-content">
                            <h3>Fort Worth</h3>
                            <p>Where cowboy culture meets modern arts and entertainment.</p>
                            <div class="card-stats">
                                <span>‚≠ê 4.7</span>
                                <span>üë™ 935K</span>
                            </div>
                            <a href="fortworth.html" class="card-button">Explore</a>
                        </div>
                    </div>
                </div>
            </section>
        </main>
        <footer>
            <p>&copy; 2024 Welcome to Texas. All rights reserved.</p>
            <button class="button">
                <a href="https://www.sos.state.tx.us/index.shtml" target="_blank">Learn More</a>
            </button>
            <button class="button">
                <a href="contact.html">Contact Us</a>
            </button>
        </footer>
    </div>

   <script>
       document.addEventListener('DOMContentLoaded', async () => {
            const API_KEY = '161a8198e9ce488490662508250204';
            const weatherWidget = document.querySelector('.weather-widget');
            
            try {
                // Show loading state
                weatherWidget.innerHTML = `
                    <h4>Current Weather</h4>
                    <div class="weather-content">
                        <img class="weather-icon" src="data:image/svg+xml;base64,PHN2Zy...loading..." alt="Loading">
                        <div class="weather-details">
                            <span class="weather-temp">--¬∞F</span>
                            <span class="weather-desc">Loading weather...</span>
                        </div>
                    </div>
                `;

                const city = weatherWidget.dataset.city;
                const response = await fetch(
                    `https://api.weatherapi.com/v1/current.json?key=${API_KEY}&q=${city},Texas&aqi=no`
                );

                if (!response.ok) throw new Error(`API Error ${response.status}`);
                
                const data = await response.json();
                
                // Update UI with live data
                weatherWidget.querySelector('.weather-temp').textContent = 
                    `${Math.round(data.current.temp_f)}¬∞F`;
                weatherWidget.querySelector('.weather-desc').textContent = 
                    data.current.condition.text;
                weatherWidget.querySelector('.weather-icon').src = 
                    `https:${data.current.condition.icon}`.replace('64x64', '128x128');
                
                // Store for offline use
                localStorage.setItem(`weather-${city}`, JSON.stringify(data));

            } catch (error) {
                console.error('Weather fetch failed:', error);
                
                // Try to show cached data
                const city = weatherWidget.dataset.city;
                const cached = localStorage.getItem(`weather-${city}`);
                if (cached) {
                    const data = JSON.parse(cached);
                    weatherWidget.innerHTML = `
                        <h4>Current Weather (Cached)</h4>
                        <div class="weather-content">
                            <img class="weather-icon" src="https:${data.current.condition.icon}" 
                                alt="${data.current.condition.text}">
                            <div class="weather-details">
                                <span class="weather-temp">${Math.round(data.current.temp_f)}¬∞F</span>
                                <span class="weather-desc">${data.current.condition.text}</span>
                            </div>
                        </div>
                        <p class="weather-warning">‚ö†Ô∏è Showing cached data</p>
                    `;
                } else {
                    weatherWidget.innerHTML = `
                        <h4>Weather Unavailable</h4>
                        <div class="weather-error">
                            <p>Couldn't load weather data</p>
                            <button onclick="window.location.reload()">Retry</button>
                        </div>
                    `;
                }
            }
        });

        // Interactive Map
        document.addEventListener('DOMContentLoaded', () => {
            const cityMarkers = document.querySelectorAll('.city-marker');
            const stateOutline = document.querySelector('.state-outline');
            
            cityMarkers.forEach(marker => {
                marker.addEventListener('mouseenter', () => {
                    marker.querySelector('circle').setAttribute('fill', '#ffcc00');
                    stateOutline.setAttribute('fill', 'rgba(0, 64, 128, 0.2)');
                });
                
                marker.addEventListener('mouseleave', () => {
                    const city = marker.getAttribute('data-city');
                    const originalColor = {
                        'austin': '#004080',
                        'irving': '#e63946',
                        'fortworth': '#28a745'
                    }[city];
                    marker.querySelector('circle').setAttribute('fill', originalColor);
                    stateOutline.setAttribute('fill', 'rgba(0, 64, 128, 0.1)');
                });
                
                marker.addEventListener('click', () => {
                    const city = marker.getAttribute('data-city');
                    const cityPages = {
                        'austin': 'capital.html',
                        'irving': 'irving.html',
                        'fortworth': 'fortworth.html'
                    };
                    window.location.href = cityPages[city];
                });
            });
            
            // Pulse animation for capital
            const austinMarker = document.querySelector('[data-city="austin"] circle');
            setInterval(() => {
                austinMarker.style.transform = austinMarker.style.transform === 'scale(1.1)' ? 'scale(1)' : 'scale(1.1)';
            }, 1000);
        });
    </script>
</body>
</html>
