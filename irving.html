<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>About Irving - Texas</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="grid-container">
        <header>
            <h1>About Irving</h1>
            <nav>
                <ul>
                    <li><a href="index.html">Home</a></li>
                    <li><a href="capital.html">Austin</a></li>
                    <li><a href="irving.html">Irving</a></li>
                    <li><a href="fortworth.html">Fort Worth</a></li>
                    <li><a href="contact.html">Contact</a></li>
                </ul>
            </nav>
        </header>
        <aside>
            <h3>Interesting Facts About Irving</h3>
            <!-- In capital.html -->
                <div class="weather-widget" data-city="Austin">
                    <h4>Current Weather</h4>
                    <div class="weather-content">
                    <img class="weather-icon" src="" alt="Weather icon">
                    <div class="weather-details">
                        <span class="weather-temp">--°F</span>
                        <span class="weather-desc">Loading...</span>
                    </div>
                    </div>
                </div>
                
                <!-- In irving.html -->
                <div class="weather-widget" data-city="Irving">
                
                <!-- In fortworth.html -->
                <div class="weather-widget" data-city="Fort Worth">
            <p>Irving is home to the Las Colinas Urban Center, one of the first master-planned developments in the United States.</p>
            <p>The Mustangs of Las Colinas sculpture is one of the largest equestrian sculptures in the world.</p>
            <ul>
                <li>Close proximity to DFW International Airport</li>
                <li>Hosts a vibrant international community</li>
                <li>Attractions like the Irving Arts Center</li>
            </ul>
        </aside>
        <main>
            <section>
                <h2>Irving, Texas</h2>
                <p>
                    Irving is a thriving city in the Dallas-Fort Worth metroplex. Known for its business-friendly environment, diverse community, and attractions like the Toyota Music Factory.
                </p>
                <ul>
                    <li><strong>Population:</strong> 239,798</li>
                    <li><strong>Year Incorporated:</strong> 1914</li>
                    <li><strong>Region:</strong> North Texas</li>
                    <li><strong>Classification:</strong> Suburban</li>
                    <li><strong>Average Income:</strong> Slightly higher than the state average</li>
                </ul>
                <img src="images/irving.jpg" alt="City of Irving Skyline">
            </section>
        </main>
        <footer>
            <p>&copy; 2024 Welcome to Texas - Irving. All rights reserved.</p>
        </footer>
    </div>
</body>
<script>
    document.addEventListener('DOMContentLoaded', function() {
    const weatherWidget = document.querySelector('.weather-widget');
    const city = weatherWidget.getAttribute('data-city').toLowerCase();
    
    // DOM elements
    const tempEl = weatherWidget.querySelector('.weather-temp');
    const descEl = weatherWidget.querySelector('.weather-desc');
    const iconEl = weatherWidget.querySelector('.weather-icon');

    // Loading state
    tempEl.textContent = '--°F';
    descEl.textContent = 'Loading...';
    iconEl.src = 'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJ3aGl0ZSI+PHBhdGggZD0iTTEyIDJMNi41IDEyLjVMOUwxMy41IDVMMTUgMTguNUwxOCAxMC41TDEyIDJ6Ii8+PC9zdmc+';

    // Fetch via proxy
    fetch(`/weather-proxy.php?city=${encodeURIComponent(city)}`)
        .then(response => {
            if (!response.ok) throw new Error('Weather service unavailable');
            return response.json();
        })
        .then(data => {
            if (data.error) throw new Error(data.error);
            
            tempEl.textContent = `${Math.round(data.main.temp)}°F`;
            descEl.textContent = data.weather[0].description;
            iconEl.src = `https://openweathermap.org/img/wn/${data.weather[0].icon}@2x.png`;
            iconEl.alt = data.weather[0].main;
        })
        .catch(error => {
            console.error('Weather error:', error);
            descEl.textContent = error.message;
            iconEl.src = '';
        });
    });
</script>
</html>
